<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMix Graphics Control Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="control-page">
    <div class="control-container">
        <!-- Header -->
        <div class="header" style="background: #000000; padding: 15px 30px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(0,0,0,0.8);">
            <div style="display: flex; align-items: center; gap: 30px;">
                <img src="vernum-logo.png" alt="Vernum Broadcast" class="header-logo" style="height: 70px; width: auto; display: block;" onerror="console.warn('Logo not found. Please save your logo as vernum-logo.png in the same folder as control.html');">
                <div style="text-align: left;">
                    <h1 style="margin: 0; font-size: 28px; letter-spacing: 2px;">GFX PACKAGE</h1>
                    <p class="subtitle" style="margin: 5px 0 0 0; font-size: 13px; opacity: 0.8;">Made available by James Watson</p>
                </div>
            </div>
            <div style="text-align: right; color: rgba(255,255,255,0.6); font-size: 12px;">
                <div style="font-weight: 600; color: #2E7CFF; margin-bottom: 3px;">BROADCAST CONTROL</div>
                <div id="headerTime" style="font-family: monospace; letter-spacing: 1px;">--:--:--</div>
            </div>
        </div>

        <!-- Quick Action Bar -->
        <div class="quick-actions" style="grid-template-columns: repeat(5, 1fr);">
            <div class="quick-action-group quick-l3-group">
                <h3>Lower Thirds (L3)</h3>
                <div class="l3-selector">
                    <select id="quickL3Selector" style="width: 100%; padding: 8px; margin-bottom: 10px; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); font-size: 14px;">
                        <option value="1">L3-1: Your Name Here</option>
                        <option value="2">L3-2: Your Name Here</option>
                        <option value="3">L3-3: Your Name Here</option>
                        <option value="4">L3-4: Your Name Here</option>
                        <option value="5">L3-5: Your Name Here</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn-preview btn-info" id="quickPreviewL3">
                        <span class="icon">üëÅ</span> PVW
                    </button>
                    <button class="btn-live btn-success" id="quickShowL3">
                        <span class="icon">‚ñ∂</span> LIVE
                    </button>
                    <button class="btn-off btn-danger" id="quickHideL3">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                </div>
            </div>
            <div class="quick-action-group">
                <h3>Dual L3s</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-bottom: 8px;">
                    <div style="font-size: 10px; color: rgba(255,255,255,0.6); text-align: center;">LEFT</div>
                    <div style="font-size: 10px; color: rgba(255,255,255,0.6); text-align: center;">RIGHT</div>
                    <select id="quickDualL3Left" style="padding: 4px; border-radius: 4px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); font-size: 11px;">
                        <option value="1">L3-1: Your Name Here</option>
                        <option value="2">L3-2: Your Name Here</option>
                        <option value="3">L3-3: Your Name Here</option>
                        <option value="4">L3-4: Your Name Here</option>
                        <option value="5">L3-5: Your Name Here</option>
                    </select>
                    <select id="quickDualL3Right" style="padding: 4px; border-radius: 4px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); font-size: 11px;">
                        <option value="1">L3-1: Your Name Here</option>
                        <option value="2" selected>L3-2: Your Name Here</option>
                        <option value="3">L3-3: Your Name Here</option>
                        <option value="4">L3-4: Your Name Here</option>
                        <option value="5">L3-5: Your Name Here</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn-preview btn-info" id="quickPreviewDualL3">
                        <span class="icon">üëÅ</span> PVW
                    </button>
                    <button class="btn-live btn-success" id="quickShowDualL3">
                        <span class="icon">‚ñ∂</span> LIVE
                    </button>
                    <button class="btn-off btn-danger" id="quickHideDualL3">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                </div>
            </div>
            <div class="quick-action-group">
                <h3>Corner Bugs + Timer</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; margin-bottom: 10px;">
                    <div style="text-align: center; font-size: 10px; color: rgba(255,255,255,0.7);">TOP LEFT</div>
                    <div style="text-align: center; font-size: 10px; color: rgba(255,255,255,0.7);">TOP RIGHT</div>
                    <div style="text-align: center; font-size: 10px; color: rgba(255,255,255,0.7);">TIMER (BR)</div>
                    <button class="btn-live btn-success" id="quickShowBugLeft" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ∂</span> SHOW
                    </button>
                    <button class="btn-live btn-success" id="quickShowBugRight" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ∂</span> SHOW
                    </button>
                    <button class="btn-live btn-success" id="quickStartTimer" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ∂</span> START
                    </button>
                    <button class="btn-off btn-danger" id="quickHideBugLeft" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                    <button class="btn-off btn-danger" id="quickHideBugRight" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                    <button class="btn-off btn-danger" id="quickHideTimer" style="font-size: 11px; padding: 6px 4px;">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                </div>
            </div>
            <div class="quick-action-group">
                <h3>Ticker</h3>
                <div class="button-group">
                    <button class="btn-preview btn-info" id="quickPreviewTicker">
                        <span class="icon">üëÅ</span> PVW
                    </button>
                    <button class="btn-live btn-success" id="quickShowTicker">
                        <span class="icon">‚ñ∂</span> LIVE
                    </button>
                    <button class="btn-off btn-danger" id="quickHideTicker">
                        <span class="icon">‚ñ†</span> OFF
                    </button>
                </div>
            </div>
            <div class="quick-action-group">
                <h3>Master Control</h3>
                <div class="button-group">
                    <button class="btn-special btn-primary" id="quickPreviewToLive">
                        <span class="icon">‚û§</span> PVW ‚Üí LIVE
                    </button>
                    <button class="btn-off btn-danger" id="quickHideAll">
                        <span class="icon">‚ñ†</span> ALL OFF
                    </button>
                </div>
            </div>
        </div>

        <!-- Preview Window -->
        <div class="preview-section" id="previewSection">
            <div class="preview-label pvw">
                PREVIEW
                <button id="btnTogglePreview" style="margin-left: 10px; padding: 3px 10px; background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 10px; font-weight: 600;">Hide</button>
            </div>
            <div class="preview-frame" id="previewFrameContainer">
                <iframe id="previewFrame" src="output.html"></iframe>
            </div>
        </div>

        <!-- Transmit Window -->
        <div class="preview-section">
            <div class="preview-label tx">TRANSMIT (Use this URL in VMix)</div>
            <div class="preview-frame">
                <iframe id="transmitFrame" src="output.html"></iframe>
            </div>
            <div style="display: flex; gap: 6px; align-items: center; margin-top: 5px; padding: 6px 10px; background: rgba(122, 26, 26, 0.3); border-radius: 5px;">
                <span style="font-size: 10px; color: rgba(255,255,255,0.7); white-space: nowrap;">VMix URL:</span>
                <input type="text" id="quickTransmitUrl" readonly style="flex: 1; padding: 4px 8px; background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.2); color: white; font-family: monospace; border-radius: 3px; font-size: 10px;">
                <button id="btnQuickCopyUrl" style="padding: 4px 12px; background: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: 600; font-size: 10px; white-space: nowrap;">Copy URL</button>
                <button id="btnQuickOpenTab" style="padding: 4px 12px; background: #17a2b8; color: white; border: none; border-radius: 3px; cursor: pointer; font-weight: 600; font-size: 10px; white-space: nowrap;">Open Tab</button>
            </div>
        </div>

        <!-- Control Panels -->
        <div class="controls-section">
            <!-- Tabs -->
            <div class="control-tabs">
                <button class="tab-button active" data-tab="lower-third">Lower Third</button>
                <button class="tab-button" data-tab="dual-l3">Dual L3s</button>
                <button class="tab-button" data-tab="bugs">Corner Bugs</button>
                <button class="tab-button" data-tab="ticker">Ticker</button>
                <button class="tab-button" data-tab="data-sources">Data Sources</button>
                <button class="tab-button" data-tab="styling">Styling</button>
                <button class="tab-button" data-tab="output">Output</button>
            </div>

            <!-- Lower Third Tab -->
            <div id="lower-third" class="tab-content active">
                <!-- L3 Slot Selector -->
                <div class="control-group">
                    <h3>Select Lower Third Slot</h3>
                    <div class="l3-tabs">
                        <button class="l3-tab-btn active" data-slot="1">L3-1</button>
                        <button class="l3-tab-btn" data-slot="2">L3-2</button>
                        <button class="l3-tab-btn" data-slot="3">L3-3</button>
                        <button class="l3-tab-btn" data-slot="4">L3-4</button>
                        <button class="l3-tab-btn" data-slot="5">L3-5</button>
                    </div>
                    <p class="info-text">Prepare up to 5 lower thirds. Click a tab to edit that slot.</p>
                </div>

                <!-- L3 Content (changes based on selected slot) -->
                <div class="control-group">
                    <h3>
                        Lower Third Content - <span id="currentSlotLabel">Slot 1</span>
                        <span id="currentSlotContent" style="display: block; font-size: 14px; font-weight: 400; color: var(--vernum-blue); margin-top: 5px;"></span>
                    </h3>
                    <div class="form-row">
                        <label for="l3Primary">Primary Text:</label>
                        <input type="text" id="l3Primary" placeholder="e.g., Rich McDonald" value="">
                    </div>
                    <div class="form-row">
                        <label for="l3Secondary">Secondary Text:</label>
                        <input type="text" id="l3Secondary" placeholder="e.g., Trade Live With IG" value="">
                    </div>
                    <div class="form-row">
                        <label for="l3ShowPrimary">Show Primary Box:</label>
                        <input type="checkbox" id="l3ShowPrimary" checked>
                    </div>
                    <div class="form-row">
                        <label for="l3ShowSecondary">Show Secondary Box:</label>
                        <input type="checkbox" id="l3ShowSecondary" checked>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Position & Appearance</h3>
                    <div class="form-row">
                        <label for="l3X">X Position (px):</label>
                        <input type="number" id="l3X" value="80" min="0" max="1920">
                    </div>
                    <div class="form-row">
                        <label for="l3Y">Y Position (px):</label>
                        <input type="number" id="l3Y" value="850" min="0" max="1080">
                    </div>
                    <div class="form-row">
                        <label for="l3FontSize1">Primary Font Size (px):</label>
                        <input type="number" id="l3FontSize1" value="42" min="10" max="120">
                    </div>
                    <div class="form-row">
                        <label for="l3FontSize2">Secondary Font Size (px):</label>
                        <input type="number" id="l3FontSize2" value="36" min="10" max="120">
                    </div>
                    <div class="form-row">
                        <label for="l3BorderRadius">Border Radius (px):</label>
                        <input type="number" id="l3BorderRadius" value="25" min="0" max="100">
                    </div>
                    <div class="form-row">
                        <label for="l3BoxSpacing">Box Spacing (px):</label>
                        <input type="number" id="l3BoxSpacing" value="10" min="0" max="50">
                    </div>
                </div>

                <div class="control-group">
                    <h3>Colors</h3>
                    <div class="form-row">
                        <label for="l3PrimaryBg">Primary Background:</label>
                        <input type="color" id="l3PrimaryBg" value="#ffffff">
                    </div>
                    <div class="form-row">
                        <label for="l3PrimaryColor">Primary Text Color:</label>
                        <input type="color" id="l3PrimaryColor" value="#000000">
                    </div>
                    <div class="form-row">
                        <label for="l3SecondaryBg">Secondary Background:</label>
                        <input type="color" id="l3SecondaryBg" value="#dc3545">
                    </div>
                    <div class="form-row">
                        <label for="l3SecondaryColor">Secondary Text Color:</label>
                        <input type="color" id="l3SecondaryColor" value="#ffffff">
                    </div>
                </div>

                <div class="control-group">
                    <h3>Logo Override (This Slot Only)</h3>
                    <p class="info-text">Override the global logo for this specific L3 slot.</p>
                    <div class="form-row">
                        <label for="l3LogoEnabled">Use Logo for This L3:</label>
                        <select id="l3LogoEnabled">
                            <option value="global">Use Global Setting</option>
                            <option value="yes">Yes (Force On)</option>
                            <option value="no">No (Force Off)</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="l3CustomLogoUrl">Custom Logo URL (Optional):</label>
                        <input type="text" id="l3CustomLogoUrl" placeholder="Leave empty to use global logo">
                    </div>
                    <div class="form-row">
                        <label for="l3CustomLogoFile">Or Upload Custom Logo:</label>
                        <input type="file" id="l3CustomLogoFile" accept="image/*">
                    </div>
                </div>

                <div class="control-group">
                    <h3>Animation Controls</h3>
                    <div class="button-group">
                        <button class="btn-success" id="btnShowL3Preview">Show on Preview</button>
                        <button class="btn-success" id="btnShowL3Transmit">Show on Transmit</button>
                        <button class="btn-success" id="btnShowL3Both">Show on Both</button>
                    </div>
                    <div class="button-group">
                        <button class="btn-danger" id="btnHideL3Preview">Hide Preview</button>
                        <button class="btn-danger" id="btnHideL3Transmit">Hide Transmit</button>
                        <button class="btn-danger" id="btnHideL3Both">Hide Both</button>
                    </div>
                </div>
            </div>

            <!-- Dual L3s Tab -->
            <div id="dual-l3" class="tab-content">
                <div class="control-group">
                    <h3>Dual Lower Thirds Setup</h3>
                    <p class="info-text">Display two lower thirds simultaneously - one on the left, one on the right of the screen. Select which of your 5 prepared L3 slots to show on each side. Great for debates, interviews, or split-screen scenarios.</p>
                </div>

                <div class="control-group">
                    <h3>Left Side - Select L3 Slot</h3>
                    <div class="form-row">
                        <label for="dualL3LeftSlot">Show this slot on left:</label>
                        <select id="dualL3LeftSlot">
                            <option value="1">L3-1</option>
                            <option value="2">L3-2</option>
                            <option value="3">L3-3</option>
                            <option value="4">L3-4</option>
                            <option value="5">L3-5</option>
                        </select>
                    </div>
                    <div class="dual-l3-preview" id="dualL3LeftPreview">
                        <div class="preview-label-mini">Preview of selected slot:</div>
                        <div class="preview-text">
                            <strong id="dualL3LeftPreviewPrimary">-</strong><br>
                            <span id="dualL3LeftPreviewSecondary">-</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Right Side - Select L3 Slot</h3>
                    <div class="form-row">
                        <label for="dualL3RightSlot">Show this slot on right:</label>
                        <select id="dualL3RightSlot">
                            <option value="1">L3-1</option>
                            <option value="2" selected>L3-2</option>
                            <option value="3">L3-3</option>
                            <option value="4">L3-4</option>
                            <option value="5">L3-5</option>
                        </select>
                    </div>
                    <div class="dual-l3-preview" id="dualL3RightPreview">
                        <div class="preview-label-mini">Preview of selected slot:</div>
                        <div class="preview-text">
                            <strong id="dualL3RightPreviewPrimary">-</strong><br>
                            <span id="dualL3RightPreviewSecondary">-</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Dual L3 Controls</h3>
                    <div class="button-group">
                        <button class="btn-info" id="btnShowDualL3Preview">üëÅ Show on Preview</button>
                        <button class="btn-success" id="btnShowDualL3Transmit">‚ñ∂ Show on Transmit</button>
                        <button class="btn-success" id="btnShowDualL3Both">‚ñ∂ Show on Both</button>
                    </div>
                    <div class="button-group">
                        <button class="btn-danger" id="btnHideDualL3Both">‚ñ† Hide Both</button>
                    </div>
                </div>
            </div>

            <!-- Corner Bugs Tab -->
            <div id="bugs" class="tab-content">
                <div class="control-group">
                    <h3>Corner Bugs</h3>
                    <p class="info-text">Small text badges that appear in the top corners. Automatically scales based on text length. Perfect for channel branding, live indicators, or event names.</p>
                </div>

                <div class="control-group">
                    <h3>Top Left Bug</h3>
                    <div class="form-row">
                        <label for="bugLeftText">Text:</label>
                        <input type="text" id="bugLeftText" value="LIVE" placeholder="e.g., LIVE or Channel Name">
                    </div>
                    <div class="form-row">
                        <label for="bugLeftBg">Background Color:</label>
                        <input type="color" id="bugLeftBg" value="#dc3545">
                    </div>
                    <div class="button-group">
                        <button class="btn-success" id="btnShowBugLeft">Show Bug</button>
                        <button class="btn-danger" id="btnHideBugLeft">Hide Bug</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Top Right Bug</h3>
                    <div class="form-row">
                        <label for="bugRightText">Text:</label>
                        <input type="text" id="bugRightText" value="PREVIOUSLY" placeholder="e.g., Breaking News">
                    </div>
                    <div class="form-row">
                        <label for="bugRightBg">Background Color:</label>
                        <input type="color" id="bugRightBg" value="#dc3545">
                    </div>
                    <div class="button-group">
                        <button class="btn-success" id="btnShowBugRight">Show Bug</button>
                        <button class="btn-danger" id="btnHideBugRight">Hide Bug</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Bottom Right Bug</h3>
                    <div class="form-row">
                        <label for="bugBottomText">Text:</label>
                        <input type="text" id="bugBottomText" value="" placeholder="e.g., COMING UP NEXT">
                    </div>
                    <div class="form-row">
                        <label for="bugBottomBg">Background Color:</label>
                        <input type="color" id="bugBottomBg" value="#dc3545">
                    </div>
                    <div class="button-group">
                        <button class="btn-success" id="btnShowBugBottom">Show Bug</button>
                        <button class="btn-danger" id="btnHideBugBottom">Hide Bug</button>
                    </div>
                </div>

                <div class="control-group" style="border-top: 2px solid #2E7CFF; margin-top: 30px; padding-top: 20px;">
                    <h3>‚è∞ Timer/Clock Control</h3>
                    <p class="info-text">Show a live clock, countdown, or stopwatch on any corner bug. Select position, configure timer, then click Start.</p>
                    
                    <div class="form-row">
                        <label for="timerPosition">Timer Position:</label>
                        <select id="timerPosition">
                            <option value="top-left">Top Left Bug</option>
                            <option value="top-right">Top Right Bug</option>
                            <option value="bottom-right" selected>Bottom Right Bug</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <label for="timerType">Timer Type:</label>
                        <select id="timerType">
                            <option value="none">None (Text Mode)</option>
                            <option value="clock" selected>Live Clock (Time of Day)</option>
                            <option value="countdownTo">Countdown to Time</option>
                            <option value="stopwatch">Stopwatch (Count Up)</option>
                            <option value="countdownFrom">Countdown from Duration</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <label for="timerFormat">Display Format:</label>
                        <select id="timerFormat">
                            <option value="hm" selected>HH:MM (Hours, Minutes)</option>
                            <option value="hms">HH:MM:SS (Hours, Minutes, Seconds)</option>
                            <option value="ms">MM:SS (Minutes, Seconds)</option>
                            <option value="hmsms">HH:MM:SS.000 (With Milliseconds)</option>
                            <option value="msms">MM:SS.000 (Minutes, Seconds, Milliseconds)</option>
                            <option value="sms">SS.000 (Seconds, Milliseconds only)</option>
                        </select>
                    </div>
                    
                    <div class="form-row" id="timerTargetTimeRow" style="display: none;">
                        <label for="timerTargetTime">Target Time (HH:MM:SS):</label>
                        <input type="time" id="timerTargetTime" step="1">
                    </div>
                    
                    <div class="form-row" id="timerDurationRow" style="display: none;">
                        <label for="timerDuration">Duration (minutes):</label>
                        <input type="number" id="timerDuration" value="5" min="1" max="999">
                    </div>
                    
                    <div class="form-row">
                        <label for="timerLabel">Label (optional):</label>
                        <input type="text" id="timerLabel" placeholder="e.g., TIME REMAINING, LIVE TIME">
                    </div>
                    
                    <div class="form-row">
                        <label for="timerBg">Background Color:</label>
                        <input type="color" id="timerBg" value="#dc3545">
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-success" id="btnStartTimer">Start Timer</button>
                        <button class="btn-warning" id="btnPauseTimer">Pause</button>
                        <button class="btn-secondary" id="btnResetTimer">Reset</button>
                        <button class="btn-danger" id="btnHideTimer">Stop & Hide</button>
                    </div>
                </div>
            </div>

            <!-- Ticker Tab -->
            <div id="ticker" class="tab-content">
                <div class="control-group">
                    <h3>Ticker Content</h3>
                    <div class="form-row">
                        <label for="tickerText">Ticker Items:</label>
                        <textarea id="tickerText" placeholder="Enter ticker items separated by | (pipe character)&#10;Example: Breaking News | Weather Update | Sports Score">Breaking News | Latest Updates | Live Coverage | More Information Coming Soon</textarea>
                    </div>
                    <p class="info-text">Separate multiple items with | (pipe character)</p>
                </div>

                <div class="control-group">
                    <h3>Ticker Settings</h3>
                    <div class="form-row">
                        <label for="tickerSpeed">Speed (seconds):</label>
                        <input type="number" id="tickerSpeed" value="20" min="5" max="60">
                    </div>
                    <div class="form-row">
                        <label for="tickerPosition">Position:</label>
                        <select id="tickerPosition">
                            <option value="bottom">Bottom</option>
                            <option value="top">Top</option>
                            <option value="custom">Custom Y Position</option>
                        </select>
                    </div>
                    <div class="form-row" id="tickerCustomPosRow" style="display: none;">
                        <label for="tickerCustomPos">Custom Y (px):</label>
                        <input type="number" id="tickerCustomPos" value="0" min="0" max="1080">
                    </div>
                    <div class="form-row">
                        <label for="tickerBg">Background Color:</label>
                        <input type="color" id="tickerBg" value="#dc3545">
                    </div>
                    <div class="form-row">
                        <label for="tickerBgOpacity">Background Opacity:</label>
                        <input type="number" id="tickerBgOpacity" value="100" min="0" max="100" step="5">
                    </div>
                    <div class="form-row">
                        <label for="tickerColor">Text Color:</label>
                        <input type="color" id="tickerColor" value="#ffffff">
                    </div>
                    <div class="form-row">
                        <label for="tickerFontSize">Font Size (px):</label>
                        <input type="number" id="tickerFontSize" value="28" min="12" max="60">
                    </div>
                </div>

                <div class="control-group">
                    <h3>Ticker Controls</h3>
                    <div class="button-group">
                        <button class="btn-success" id="btnShowTickerPreview">Show on Preview</button>
                        <button class="btn-success" id="btnShowTickerTransmit">Show on Transmit</button>
                        <button class="btn-success" id="btnShowTickerBoth">Show on Both</button>
                    </div>
                    <div class="button-group">
                        <button class="btn-danger" id="btnHideTickerPreview">Hide Preview</button>
                        <button class="btn-danger" id="btnHideTickerTransmit">Hide Transmit</button>
                        <button class="btn-danger" id="btnHideTickerBoth">Hide Both</button>
                    </div>
                </div>
            </div>

            <!-- Data Sources Tab -->
            <div id="data-sources" class="tab-content">
                <div class="control-group">
                    <h3>Google Sheets Integration</h3>
                    <div class="form-row">
                        <label for="gsheetUrl">Google Sheet URL:</label>
                        <input type="url" id="gsheetUrl" placeholder="https://docs.google.com/spreadsheets/d/...">
                    </div>
                    <p class="info-text">
                        To use Google Sheets: 
                        <br>1. Make your sheet public (Share ‚Üí Anyone with the link can view)
                        <br>2. Paste the full URL above
                        <br>3. Your sheet should have columns: Name, Title (for lower thirds)
                    </p>
                    <div class="button-group">
                        <button class="btn-primary" id="btnLoadGsheet">Load from Google Sheets</button>
                        <button class="btn-secondary" id="btnTestGsheet">Test Connection</button>
                    </div>
                    <div id="gsheetStatus" style="margin-top: 10px;"></div>
                </div>

                <div class="control-group">
                    <h3>Rundown Creator API</h3>
                    <div class="form-row">
                        <label for="rcChannel">Channel Name:</label>
                        <input type="text" id="rcChannel" placeholder="e.g., channel4news">
                    </div>
                    <div class="form-row">
                        <label for="rcApiKey">API Key:</label>
                        <input type="text" id="rcApiKey" placeholder="Your API Key">
                    </div>
                    <div class="form-row">
                        <label for="rcApiToken">API Token:</label>
                        <input type="text" id="rcApiToken" placeholder="Your API Token">
                    </div>
                    <div class="form-row">
                        <label for="rcRundownId">Rundown ID:</label>
                        <input type="number" id="rcRundownId" placeholder="Leave empty to list all">
                    </div>
                    <p class="info-text">
                        Get your API credentials from Rundown Creator settings.
                        <br>Leave Rundown ID empty to see a list of available rundowns.
                    </p>
                    <div class="button-group">
                        <button class="btn-primary" id="btnLoadRundown">Load Rundown</button>
                        <button class="btn-secondary" id="btnListRundowns">List Rundowns</button>
                    </div>
                    <div id="rcStatus" style="margin-top: 10px;"></div>
                </div>

                <div class="control-group">
                    <h3>JSON Config File</h3>
                    <div class="form-row">
                        <label for="jsonFile">Upload Config:</label>
                        <input type="file" id="jsonFile" accept=".json">
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" id="btnLoadJson">Load JSON Config</button>
                        <button class="btn-info" id="btnExportJson">Export Current Config</button>
                    </div>
                </div>
            </div>

            <!-- Styling Tab -->
            <div id="styling" class="tab-content">
                <div class="control-group">
                    <h3>üé® Global Color Settings</h3>
                    <p class="info-text">Batch change colors across ALL L3s, bugs, ticker, and timer at once.</p>
                    
                    <div class="control-group" style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h4 style="margin-top: 0; margin-bottom: 12px; color: #2c5aa0;">‚ö° Quick Color Presets</h4>
                        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px;">
                            <button class="btn-secondary" id="btnPresetRed" style="background: #dc3545; border: 2px solid #dc3545; padding: 10px 5px; font-size: 13px; font-weight: 700;">
                                RED
                            </button>
                            <button class="btn-secondary" id="btnPresetGreen" style="background: #28a745; border: 2px solid #28a745; padding: 10px 5px; font-size: 13px; font-weight: 700;">
                                GREEN
                            </button>
                            <button class="btn-secondary" id="btnPresetBlue" style="background: #0056b3; border: 2px solid #0056b3; padding: 10px 5px; font-size: 13px; font-weight: 700;">
                                ROYAL BLUE
                            </button>
                            <button class="btn-secondary" id="btnPresetOrange" style="background: #fd7e14; border: 2px solid #fd7e14; padding: 10px 5px; font-size: 13px; font-weight: 700;">
                                ORANGE
                            </button>
                            <button class="btn-secondary" id="btnPresetPurple" style="background: #6f42c1; border: 2px solid #6f42c1; padding: 10px 5px; font-size: 13px; font-weight: 700;">
                                PURPLE
                            </button>
                        </div>
                        <p style="margin-top: 10px; margin-bottom: 0; font-size: 12px; opacity: 0.7;">Click a preset to instantly apply that house color to all graphics</p>
                    </div>
                    
                    <div class="form-row">
                        <label for="globalPrimaryBg">Primary Box Background:</label>
                        <input type="color" id="globalPrimaryBg" value="#ffffff">
                    </div>
                    <div class="form-row">
                        <label for="globalPrimaryText">Primary Box Text:</label>
                        <input type="color" id="globalPrimaryText" value="#000000">
                    </div>
                    <div class="form-row">
                        <label for="globalSecondaryBg">Secondary Box/Bugs/Ticker Background:</label>
                        <input type="color" id="globalSecondaryBg" value="#dc3545">
                    </div>
                    <div class="form-row">
                        <label for="globalSecondaryText">Secondary Box/Bugs/Ticker Text:</label>
                        <input type="color" id="globalSecondaryText" value="#ffffff">
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" id="btnApplyGlobalColors" style="font-size: 16px; padding: 12px 24px;">
                            ‚ú® Apply Custom Colors
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>üñºÔ∏è Global Logo Settings</h3>
                    <p class="info-text">Set a default logo that appears next to all L3s. You can override this per L3 slot if needed.</p>
                    <div class="form-row">
                        <label for="globalLogoUrl">Logo URL or Data:</label>
                        <input type="text" id="globalLogoUrl" value="ravelogo.png" placeholder="https://example.com/logo.png or paste base64">
                    </div>
                    <div class="form-row">
                        <label for="globalLogoFile">Or Upload Logo:</label>
                        <input type="file" id="globalLogoFile" accept="image/*">
                    </div>
                    <div class="form-row">
                        <label for="globalLogoSize">Logo Size (px):</label>
                        <input type="number" id="globalLogoSize" value="120" min="50" max="300" step="10">
                    </div>
                    <div class="form-row">
                        <label for="globalLogoBg">Logo Box Background Color:</label>
                        <input type="color" id="globalLogoBg" value="#ffffff">
                    </div>
                    <div class="form-row">
                        <label for="globalLogoEnabled">Enable Logo by Default:</label>
                        <input type="checkbox" id="globalLogoEnabled" checked>
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" id="btnApplyGlobalLogo">
                            ‚úÖ Apply Logo to All L3s
                        </button>
                        <button class="btn-secondary" id="btnClearGlobalLogo">
                            üóëÔ∏è Clear All Logos
                        </button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Font Selection</h3>
                    <div class="form-row">
                        <label for="fontFamily">Font Family:</label>
                        <select id="fontFamily">
                            <option value="Arial, Helvetica, sans-serif">Arial / Helvetica</option>
                            <option value="'Times New Roman', Times, serif">Times New Roman</option>
                            <option value="'Courier New', Courier, monospace">Courier New</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="Verdana, sans-serif">Verdana</option>
                            <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                            <option value="'Arial Black', sans-serif">Arial Black</option>
                            <option value="Impact, sans-serif">Impact</option>
                            <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                            <option value="custom">Custom Font (Upload)</option>
                        </select>
                    </div>
                    <div class="form-row" id="customFontRow" style="display: none;">
                        <label for="customFont">Upload Font:</label>
                        <input type="file" id="customFont" accept=".ttf,.otf,.woff,.woff2">
                    </div>
                    <div class="form-row" id="customFontNameRow" style="display: none;">
                        <label for="customFontName">Font Name:</label>
                        <input type="text" id="customFontName" placeholder="e.g., MyCustomFont">
                    </div>
                    <div class="button-group">
                        <button class="btn-primary" id="btnApplyFont">Apply Font</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Quick Presets</h3>
                    <div class="button-group">
                        <button class="btn-secondary" id="btnPresetDefault">Default Style</button>
                        <button class="btn-secondary" id="btnPresetNews">News Style</button>
                        <button class="btn-secondary" id="btnPresetSports">Sports Style</button>
                        <button class="btn-secondary" id="btnPresetCorporate">Corporate Style</button>
                    </div>
                </div>
            </div>

            <!-- Output Tab -->
            <div id="output" class="tab-content">
                <div class="control-group">
                    <h3>Output URL for VMix</h3>
                    <div class="form-row">
                        <label>Full URL:</label>
                        <input type="text" id="outputUrl" readonly>
                    </div>
                    <div class="button-group">
                        <button class="btn-info" id="btnCopyUrl">Copy URL</button>
                        <button class="btn-secondary" id="btnOpenOutput">Open in New Tab</button>
                    </div>
                    <p class="info-text">
                        Use this URL in VMix as an HTML input for transparent graphics overlay.
                        <br>In VMix: Add Input ‚Üí More ‚Üí Web Browser ‚Üí paste this URL
                    </p>
                </div>

                <div class="control-group">
                    <h3>URL with Parameters (Static Setup)</h3>
                    <div class="button-group">
                        <button class="btn-primary" id="btnGenerateUrl">Generate URL with Current Settings</button>
                    </div>
                    <div class="form-row">
                        <label>Generated URL:</label>
                        <textarea id="generatedUrl" readonly rows="4"></textarea>
                    </div>
                    <div class="button-group">
                        <button class="btn-info" id="btnCopyGeneratedUrl">Copy Generated URL</button>
                    </div>
                    <p class="info-text">
                        This URL includes all current settings as parameters. 
                        <br>Graphics will appear automatically when loaded in VMix.
                    </p>
                </div>

                <div class="control-group">
                    <h3>State Management</h3>
                    <div class="button-group">
                        <button class="btn-success" id="btnSaveState">Save Current State</button>
                        <button class="btn-secondary" id="btnLoadState">Load Saved State</button>
                        <button class="btn-danger" id="btnClearState">Clear Saved State</button>
                    </div>
                    <p class="info-text">
                        Save your current settings to browser localStorage for quick recall.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK for real-time GitHub Pages control -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-bridge.js"></script>
    
    <script src="control.js"></script>
    
    <script>
    // Initialize Firebase bridge after control panel loads
    document.addEventListener('DOMContentLoaded', () => {
        if (window.ENABLE_FIREBASE && window.FIREBASE_CONFIG && window.firebaseBridge) {
            const success = window.firebaseBridge.init(window.FIREBASE_CONFIG);
            if (success) {
                console.log('üî• Firebase bridge ready - real-time control enabled!');
            }
        } else {
            console.log('‚ÑπÔ∏è  Firebase not configured - using postMessage/localStorage only');
        }
    });
    </script>
</body>
</html>

